🎬 Лабораторная работа №7 — Асинхронная обработка данных через RabbitMQ
🎯 Цель работы
Научиться работать с очередями сообщений и реализовывать асинхронную обработку данных в PHP. Познакомиться с интеграцией брокера сообщений RabbitMQ через Docker. Научиться создавать producers (отправители) и consumers (обработчики) задач.

🏗️ Архитектура проекта
lab7/
├── 🐳 docker-compose.yml    # Конфигурация Docker окружения
├── 🐘 Dockerfile            # PHP-FPM с зависимостями
├── 📄 nginx.conf            # Конфигурация Nginx
├── 📄 composer.json         # PHP зависимости
└── 📁 www/
    ├── 📄 index.php         # Форма покупки билетов
    ├── 📄 QueueManager.php  # Класс для работы с RabbitMQ
    ├── 📄 worker.php        # Обработчик сообщений
    ├── 📄 test_rabbitmq.php # Тест подключения к RabbitMQ
    └── 📄 processed_orders.log # Лог обработанных заказов

🚀 Запуск проекта
# Сборка и запуск контейнеров
docker-compose up -d --build

# Запуск обработчика сообщений
docker exec -it lab7_php php worker.php

🌐 Доступные сервисы
🌐 Веб-сайт с формой заказа: http://localhost:8080

🐇 RabbitMQ Management: http://localhost:15672

🔑 Логин: guest / Пароль: guest

🔧 Технологии
🐳 Docker & Docker Compose

🐘 PHP 8.2 FPM + расширение sockets

🐇 RabbitMQ 3 + Management

📦 PHP AMQPLib

🌐 Nginx

📋 Функциональность
✅ Асинхронная обработка заказов билетов

✅ Форма заказа с полями:
   - 👤 Имя покупателя
   - 🎫 Количество билетов (1-10)
   - 🎭 Выбор фильма из списка
   - 🪑 Тип места (стандарт/комфорт/VIP)
   - 🕶️ Опция 3D очков

✅ Отправка заказов в очередь RabbitMQ

✅ Обработка заказов воркером с расчетом стоимости

✅ Логирование обработанных заказов

✅ Веб-интерфейс для мониторинга RabbitMQ

💻 Использование
1. Откройте http://localhost:8080
2. Заполните форму заказа билетов
3. Нажмите \"Купить билеты\"
4. Заказ отправляется в очередь RabbitMQ
5. Воркер автоматически обрабатывает заказы
6. Просматривайте статус в RabbitMQ Management

💰 Расчет стоимости
- Стандарт: 500 руб. за билет
- Комфорт: 800 руб. за билет  
- VIP: 1200 руб. за билет
- 3D очки: +150 руб. за билет

🐛 Логирование и отладка
# Просмотр логов всех сервисов
docker-compose logs

# Запуск worker для обработки заказов
docker exec -it lab7_php php worker.php

# Тестирование подключения к RabbitMQ
docker exec -it lab7_php php test_rabbitmq.php

👨‍💻 Автор
Константинов Владислав Алексеевич
Группа: 3МО-3 🎓
